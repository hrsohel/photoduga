import React, { useState, useEffect } from 'react';
import PageThumbnail from './PageThumbnail';


const PageNavigation = ({ currentPage, totalPages, pages, onPageChange, onAddPage, onDuplicatePage, onRemovePage, setViewMode }) => {
  const [zoomLevel, setZoomLevel] = useState('100%');

  const handlePreviousPage = () => {
    if (currentPage > 0) {
      onPageChange(currentPage - 1);
    }
  };

  const handleNextPage = () => {
    if (currentPage < totalPages - 1) {
      onPageChange(currentPage + 1);
    }
  };

  const handleZoomChange = (level) => {
    setZoomLevel(level);

  };

  return (
    <div className="w-full bg-white border-t border-gray-200 p-2">
      <div className="flex items-center justify-between mb-4">
        <div className=" space-x-2 flex items-center justify-between w-full">
          <div className='w-full flex items-center justify-start'>
            <button
              onClick={() => setViewMode('one-side')}
              className="px-3 py-1 text-xs hover:bg-gray-200 border-r-2 border-l-2 border-gray-300 flex items-center gap-2"
            >
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="10" height="24" rx="1" fill="#A8C3A0" />
                <rect x="14" width="10" height="24" rx="1" fill="#A8C3A0" />
              </svg>

              <span>One Side</span>
            </button>
            <button
              onClick={() => setViewMode('all-page')}
              className="px-3 py-1 text-xs hover:bg-gray-200 border-r-2 border-gray-300 flex items-center gap-2"
            >
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_1764_24554)">
                  <path d="M3 3.75C3 3.55109 3.07902 3.36032 3.21967 3.21967C3.36032 3.07902 3.55109 3 3.75 3H6.75C6.94891 3 7.13968 3.07902 7.28033 3.21967C7.42098 3.36032 7.5 3.55109 7.5 3.75C7.5 3.94891 7.42098 4.13968 7.28033 4.28033C7.13968 4.42098 6.94891 4.5 6.75 4.5H3.75C3.55109 4.5 3.36032 4.42098 3.21967 4.28033C3.07902 4.13968 3 3.94891 3 3.75ZM3 6.75C3 6.55109 3.07902 6.36032 3.21967 6.21967C3.36032 6.07902 3.55109 6 3.75 6H5.25C5.44891 6 5.63968 6.07902 5.78033 6.21967C5.92098 6.36032 6 6.55109 6 6.75C6 6.94891 5.92098 7.13968 5.78033 7.28033C5.63968 7.42098 5.44891 7.5 5.25 7.5H3.75C3.55109 7.5 3.36032 7.42098 3.21967 7.28033C3.07902 7.13968 3 6.94891 3 6.75Z" fill="#A8C3A0" />
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M0.2445 1.2285C0 1.71 0 2.34 0 3.5985V6.8985C0 8.1585 0 8.7885 0.2445 9.2685C0.4605 9.6915 0.804 10.0365 1.2285 10.2525C1.71 10.497 2.34 10.497 3.5985 10.497H6.8985C8.1585 10.497 8.7885 10.497 9.2685 10.2525C9.6915 10.0365 10.0365 9.693 10.2525 9.2685C10.497 8.787 10.497 8.157 10.497 6.8985V3.5985C10.497 2.3385 10.497 1.7085 10.2525 1.2285C10.0367 0.804761 9.69224 0.46028 9.2685 0.2445C8.787 0 8.157 0 6.8985 0H3.5985C2.3385 0 1.7085 0 1.2285 0.2445C0.804761 0.46028 0.46028 0.804761 0.2445 1.2285ZM6.9045 1.5H3.6045C2.949 1.5 2.5485 1.5 2.2485 1.5255C2.13926 1.53337 2.03088 1.55043 1.9245 1.5765L1.914 1.581C1.77328 1.65284 1.65884 1.76728 1.587 1.908L1.581 1.92L1.5675 1.968C1.54647 2.05864 1.53391 2.15104 1.53 2.244C1.506 2.544 1.5045 2.9445 1.5045 3.6V6.9C1.5045 7.5555 1.5045 7.956 1.53 8.256C1.53787 8.36524 1.55493 8.47362 1.581 8.58L1.587 8.5905C1.66053 8.73507 1.77895 8.85191 1.9245 8.9235L1.9725 8.937C2.0235 8.949 2.1075 8.9625 2.2485 8.9745C2.5485 8.9985 2.949 9 3.6045 9H6.9045C7.56 9 7.9605 9 8.2605 8.9745C8.36974 8.96663 8.47812 8.94957 8.5845 8.9235L8.5935 8.919C8.73445 8.84677 8.85042 8.73178 8.922 8.5905L8.928 8.58L8.9415 8.532C8.96253 8.44136 8.97509 8.34896 8.979 8.256C9.003 7.956 9.0045 7.5555 9.0045 6.9V3.6C9.0045 2.9445 9.0045 2.544 8.979 2.244C8.97113 2.13476 8.95407 2.02638 8.928 1.92L8.922 1.908C8.85016 1.76728 8.73572 1.65284 8.595 1.581L8.5845 1.5765L8.5365 1.563C8.44586 1.54197 8.35346 1.52941 8.2605 1.5255C7.9605 1.5015 7.56 1.5 6.9045 1.5Z" fill="#A8C3A0" />
                  <path d="M17.25 3C17.0511 3 16.8603 3.07902 16.7197 3.21967C16.579 3.36032 16.5 3.55109 16.5 3.75C16.5 3.94891 16.579 4.13968 16.7197 4.28033C16.8603 4.42098 17.0511 4.5 17.25 4.5H20.25C20.4489 4.5 20.6397 4.42098 20.7803 4.28033C20.921 4.13968 21 3.94891 21 3.75C21 3.55109 20.921 3.36032 20.7803 3.21967C20.6397 3.07902 20.4489 3 20.25 3H17.25ZM17.25 6C17.0511 6 16.8603 6.07902 16.7197 6.21967C16.579 6.36032 16.5 6.55109 16.5 6.75C16.5 6.94891 16.579 7.13968 16.7197 7.28033C16.8603 7.42098 17.0511 7.5 17.25 7.5H18.75C18.9489 7.5 19.1397 7.42098 19.2803 7.28033C19.421 7.13968 19.5 6.94891 19.5 6.75C19.5 6.55109 19.421 6.36032 19.2803 6.21967C19.1397 6.07902 18.9489 6 18.75 6H17.25Z" fill="#A8C3A0" />
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M13.7396 1.2285C13.4951 1.71 13.4951 2.34 13.4951 3.5985V6.8985C13.4951 8.1585 13.4951 8.7885 13.7396 9.2685C13.9556 9.6915 14.2991 10.0365 14.7236 10.2525C15.2051 10.497 15.8351 10.497 17.0936 10.497H20.3936C21.6536 10.497 22.2836 10.497 22.7636 10.2525C23.1866 10.0365 23.5316 9.693 23.7476 9.2685C23.9936 8.787 23.9936 8.157 23.9936 6.8985V3.5985C23.9936 2.3385 23.9936 1.7085 23.7476 1.2285C23.5318 0.804761 23.1874 0.46028 22.7636 0.2445C22.2821 0 21.6521 0 20.3936 0H17.0936C15.8336 0 15.2036 0 14.7236 0.2445C14.2999 0.46028 13.9554 0.804761 13.7396 1.2285ZM20.3996 1.5H17.0996C16.4456 1.5 16.0436 1.5 15.7436 1.5255C15.6344 1.53337 15.526 1.55043 15.4196 1.5765L15.4091 1.581C15.2684 1.65284 15.154 1.76728 15.0821 1.908L15.0761 1.92L15.0626 1.968C15.0416 2.05864 15.029 2.15104 15.0251 2.244C15.0011 2.544 14.9996 2.9445 14.9996 3.6V6.9C14.9996 7.5555 14.9996 7.956 15.0251 8.256C15.033 8.36524 15.05 8.47362 15.0761 8.58L15.0806 8.589V8.5905C15.1545 8.73531 15.2735 8.85218 15.4196 8.9235L15.4676 8.937C15.5186 8.949 15.6026 8.9625 15.7436 8.9745C16.0436 8.9985 16.4441 9 17.0996 9H20.3996C21.0536 9 21.4556 9 21.7556 8.9745C21.8649 8.96663 21.9732 8.94957 22.0796 8.9235L22.0856 8.9205L22.0886 8.919H22.0916C22.2326 8.84677 22.347 8.73178 22.4186 8.5905V8.5875L22.4231 8.58L22.4366 8.532C22.4577 8.44136 22.4702 8.34896 22.4741 8.256C22.4981 7.956 22.4996 7.5555 22.4996 6.9V3.6C22.4996 2.9445 22.4996 2.544 22.4741 2.244C22.4662 2.13476 22.4492 2.02638 22.4231 1.92L22.4186 1.908C22.3468 1.76728 22.2323 1.65284 22.0916 1.581L22.0796 1.5765L22.0316 1.563C21.941 1.54197 21.8486 1.52941 21.7556 1.5255C21.4556 1.5015 21.0551 1.5 20.3996 1.5Z" fill="#A8C3A0" />
                  <path d="M3 17.25C3 17.0511 3.07902 16.8603 3.21967 16.7197C3.36032 16.579 3.55109 16.5 3.75 16.5H6.75C6.94891 16.5 7.13968 16.579 7.28033 16.7197C7.42098 16.8603 7.5 17.0511 7.5 17.25C7.5 17.4489 7.42098 17.6397 7.28033 17.7803C7.13968 17.921 6.94891 18 6.75 18H3.75C3.55109 18 3.36032 17.921 3.21967 17.7803C3.07902 17.6397 3 17.4489 3 17.25ZM3 20.25C3 20.0511 3.07902 19.8603 3.21967 19.7197C3.36032 19.579 3.55109 19.5 3.75 19.5H5.25C5.44891 19.5 5.63968 19.579 5.78033 19.7197C5.92098 19.8603 6 20.0511 6 20.25C6 20.4489 5.92098 20.6397 5.78033 20.7803C5.63968 20.921 5.44891 21 5.25 21H3.75C3.55109 21 3.36032 20.921 3.21967 20.7803C3.07902 20.6397 3 20.4489 3 20.25Z" fill="#A8C3A0" />
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M0 17.1005C0 15.8405 0 15.2105 0.2445 14.7305C0.4605 14.3075 0.804 13.9625 1.2285 13.7465C1.71 13.502 2.34 13.502 3.5985 13.502H6.8985C8.1585 13.502 8.7885 13.502 9.2685 13.7465C9.6915 13.9625 10.0365 14.306 10.2525 14.7305C10.497 15.212 10.497 15.842 10.497 17.1005V20.4005C10.497 21.6605 10.497 22.2905 10.2525 22.7705C10.0367 23.1942 9.69224 23.5387 9.2685 23.7545C8.787 24.0005 8.157 24.0005 6.8985 24.0005H3.5985C2.3385 24.0005 1.7085 24.0005 1.2285 23.7545C0.804761 23.5387 0.46028 23.1942 0.2445 22.7705C0 22.289 0 21.659 0 20.4005V17.1005ZM6.9 15.0005C7.5555 15.0005 7.956 15.0005 8.256 15.026C8.36524 15.0338 8.47362 15.0509 8.58 15.077L8.589 15.0815H8.5905C8.73531 15.1554 8.85218 15.2743 8.9235 15.4205L8.937 15.4685C8.949 15.5195 8.9625 15.6035 8.9745 15.7445C8.9985 16.0445 9 16.445 9 17.1005V20.4005C9 21.0545 9 21.4565 8.9745 21.7565C8.96663 21.8657 8.94957 21.9741 8.9235 22.0805L8.919 22.091C8.84703 22.2325 8.73201 22.3475 8.5905 22.4195C8.5905 22.4195 8.5845 22.4225 8.58 22.424L8.532 22.4375C8.44136 22.4585 8.34896 22.471 8.256 22.475C7.956 22.499 7.5555 22.5005 6.9 22.5005H3.6C2.9445 22.5005 2.544 22.5005 2.244 22.475C2.13476 22.4671 2.02638 22.45 1.92 22.424L1.9095 22.4195C1.76878 22.3476 1.65434 22.2332 1.5825 22.0925L1.5765 22.0805L1.563 22.0325C1.54197 21.9418 1.52941 21.8494 1.5255 21.7565C1.5015 21.4565 1.5 21.056 1.5 20.4005V17.1005C1.5 16.4465 1.5 16.0445 1.5255 15.7445C1.53337 15.6352 1.55043 15.5268 1.5765 15.4205L1.5825 15.41C1.65434 15.2692 1.76878 15.1548 1.9095 15.083L1.92 15.077L1.968 15.0635C2.05864 15.0424 2.15104 15.0299 2.244 15.026C2.544 15.002 2.9445 15.0005 3.6 15.0005H6.9Z" fill="#A8C3A0" />
                  <path d="M17.25 19.5C17.0511 19.5 16.8603 19.579 16.7197 19.7197C16.579 19.8603 16.5 20.0511 16.5 20.25C16.5 20.4489 16.579 20.6397 16.7197 20.7803C16.8603 20.921 17.0511 21 17.25 21H18.75C18.9489 21 19.1397 20.921 19.2803 20.7803C19.421 20.6397 19.5 20.4489 19.5 20.25C19.5 20.0511 19.421 19.8603 19.2803 19.7197C19.1397 19.579 18.9489 19.5 18.75 19.5H17.25ZM17.25 16.5C17.0511 16.5 16.8603 16.579 16.7197 16.7197C16.579 16.8603 16.5 17.0511 16.5 17.25C16.5 17.4489 16.579 17.6397 16.7197 17.7803C16.8603 17.921 17.0511 18 17.25 18H20.25C20.4489 18 20.6397 17.921 20.7803 17.7803C20.921 17.6397 21 17.4489 21 17.25C21 17.0511 20.921 16.8603 20.7803 16.7197C20.6397 16.579 20.4489 16.5 20.25 16.5H17.25Z" fill="#A8C3A0" />
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M13.7396 14.7305C13.4951 15.212 13.4951 15.842 13.4951 17.1005V20.4005C13.4951 21.6605 13.4951 22.2905 13.7396 22.7705C13.9556 23.1935 14.2991 23.5385 14.7236 23.7545C15.2051 24.0005 15.8351 24.0005 17.0936 24.0005H20.3936C21.6536 24.0005 22.2836 24.0005 22.7636 23.7545C23.1866 23.5385 23.5316 23.195 23.7476 22.7705C23.9936 22.289 23.9936 21.659 23.9936 20.4005V17.1005C23.9936 15.8405 23.9936 15.2105 23.7476 14.7305C23.5318 14.3067 23.1874 13.9622 22.7636 13.7465C22.2821 13.502 21.6521 13.502 20.3936 13.502H17.0936C15.8336 13.502 15.2036 13.502 14.7236 13.7465C14.2999 13.9622 13.9554 14.3067 13.7396 14.7305ZM20.3996 15.002H17.0996C16.4456 15.002 16.0436 15.002 15.7436 15.0275C15.6344 15.0353 15.526 15.0524 15.4196 15.0785L15.4106 15.083H15.4091C15.2684 15.1548 15.154 15.2692 15.0821 15.41L15.0806 15.413L15.0761 15.422L15.0626 15.47C15.0416 15.5606 15.029 15.653 15.0251 15.746C15.0011 16.046 14.9996 16.4465 14.9996 17.102V20.402C14.9996 21.056 14.9996 21.458 15.0251 21.758C15.033 21.8672 15.05 21.9756 15.0761 22.082L15.0821 22.0925C15.1556 22.237 15.2741 22.3539 15.4196 22.4255L15.4676 22.439C15.5186 22.451 15.6026 22.4645 15.7436 22.4765C16.0436 22.5005 16.4441 22.502 17.0996 22.502H20.3996C21.0536 22.502 21.4556 22.502 21.7556 22.4765C21.8649 22.4686 21.9732 22.4515 22.0796 22.4255L22.0856 22.4225L22.0916 22.4195C22.2323 22.3476 22.3468 22.2332 22.4186 22.0925L22.4231 22.082L22.4366 22.034C22.4577 21.9433 22.4702 21.8509 22.4741 21.758C22.4981 21.458 22.4996 21.0575 22.4996 20.402V17.102C22.4996 16.448 22.4996 16.046 22.4741 15.746C22.4662 15.6367 22.4492 15.5283 22.4231 15.422L22.4186 15.41C22.3465 15.2698 22.2321 15.1559 22.0916 15.0845L22.0796 15.0785L22.0316 15.065C21.941 15.0439 21.8486 15.0314 21.7556 15.0275C21.4556 15.0035 21.0551 15.002 20.3996 15.002Z" fill="#A8C3A0" />
                </g>
                <defs>
                  <clipPath id="clip0_1764_24554">
                    <rect width="24" height="24" fill="white" />
                  </clipPath>
                </defs>
              </svg>

              <span> All Page</span>
            </button>
          </div>
          <div className='w-full flex items-center justify-center gap-4'>
            <button
              onClick={handlePreviousPage}
              disabled={currentPage <= 0}
              className="px-3 py-1 text-xs hover:bg-gray-200 border-r-2 border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"
            >
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M14.7105 15.8805L10.8305 12.0005L14.7105 8.12047C15.1005 7.73047 15.1005 7.10047 14.7105 6.71047C14.3205 6.32047 13.6905 6.32047 13.3005 6.71047L8.71047 11.3005C8.32047 11.6905 8.32047 12.3205 8.71047 12.7105L13.3005 17.3005C13.6905 17.6905 14.3205 17.6905 14.7105 17.3005C15.0905 16.9105 15.1005 16.2705 14.7105 15.8805Z" fill="#A8C3A0" />
              </svg>

              <span>Previous page</span>
            </button>
            <span className="text-xs font-medium text-gray-700">Page {currentPage * 2 + 1} - {currentPage * 2 + 2}</span>
            <button
              onClick={handleNextPage}
              disabled={currentPage >= totalPages - 1}
              className="px-3 py-1 text-xs hover:bg-gray-200 border-r-2 border-l-2 border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"
            >
              <span>Next page</span>
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9.28953 8.11953L13.1695 11.9995L9.28953 15.8795C8.89953 16.2695 8.89953 16.8995 9.28953 17.2895C9.67953 17.6795 10.3095 17.6795 10.6995 17.2895L15.2895 12.6995C15.6795 12.3095 15.6795 11.6795 15.2895 11.2895L10.6995 6.69953C10.3095 6.30953 9.67953 6.30953 9.28953 6.69953C8.90953 7.08953 8.89953 7.72953 9.28953 8.11953Z" fill="#A8C3A0" />
              </svg>

            </button>
          </div>

        </div>

        <div className="flex items-center space-x-3 w-full">
          <select
            className="text-xs border border-gray-300 rounded px-2 py-1"
            value={zoomLevel}
            onChange={(e) => handleZoomChange(e.target.value)}
          >
            <option value="50%">50%</option>
            <option value="75%">75%</option>
            <option value="100%">100%</option>
            <option value="125%">125%</option>
            <option value="150%">150%</option>
          </select>

          <button
            onClick={onAddPage}
            className="text-xs text-gray-600 hover:text-gray-800"
          >
            Blank page
          </button>

          <button
            onClick={onDuplicatePage}
            className="text-xs text-gray-600 hover:text-gray-800"
          >
            Duplicate
          </button>

          <button
            onClick={onRemovePage}
            className="text-xs text-red-600 hover:text-red-800"
          >
            Remove
          </button>
        </div>
      </div>

      <div
        className="flex space-x-3 overflow-x-auto pb-2"
        style={{ scrollbarWidth: 'thin', scrollbarColor: '#cbd5e0 #f1f5f9' }}
      >
        {pages && pages.map((page, pageIndex) => (
          <div
            key={pageIndex}
            className={`flex-shrink-0 w-24 h-16 border rounded overflow-hidden flex items-center justify-center cursor-pointer ${currentPage === pageIndex ? 'border-2 border-blue-500' : 'border-gray-300'
              }`}
            onClick={() => onPageChange(pageIndex)}
          >
            <PageThumbnail page={page} thumbWidth={220} thumbHeight={180} />
          </div>
        ))}
      </div>
    </div>
  );
};

export default PageNavigation;